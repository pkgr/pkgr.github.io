<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Install, configure, and run your packaged application</title>
  <meta name="description" content="Learn how to package Ruby, NodeJS or Go applications by reading our documentation.
">

  <link rel="stylesheet" href="/static/css/main.css">
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="/static/css/pure/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/static/css/pure/grids-responsive-min.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Raleway:200,400">
  <link rel="canonical" href="https://packager.io/documentation/install-configure-run-package/">
  <script src="/static/js/zepto.min.js"></script>
  <script>jQuery = $;</script>
</head>


  <body class="pure-skin-pkgr">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-13023229-12', 'auto');
      ga('send', 'pageview');

    </script>

    <div id="menu">
  <div class="container">
    <div class="pure-menu pure-menu-open pure-menu-horizontal">
      <a href="/" class="pure-menu-heading"><img alt="Packager" class="logo" src="/static/img/packager.svg"></a>
      <ul>
        <li><a href="/pricing">Pricing</a></li>
        <li><a href="http://blog.packager.io">Blog</a></li>
        <li><a href="/documentation">Documentation</a></li>
      </ul>
    </div>
  </div>
</div>


    <div id="main">
      <div class="container">
  <div class="pure-g">
    <div class="pure-u-1 l-box pure-u-md-1-4">
      <div id="sidebar">
  <div class="pure-menu pure-menu-open">
  
    <a class="pure-menu-heading">getting-started</a>
    <ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/register/">Register with your GitHub account</a>
      </li>
    
    
    
      <li class="">
        <a href="/documentation/enable-application-for-packaging/">Enable application for packaging</a>
      </li>
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/launch-build/">Launch your first build</a>
      </li>
    
    
    
    
    
      <li class="pure-menu-selected">
        <a href="/documentation/install-configure-run-package/">Install, configure, and run your packaged application</a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    </ul>
  
    <a class="pure-menu-heading">reference</a>
    <ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/customizing-the-build/">Customizing the build</a>
      </li>
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/procfile/">Process types (Procfile)</a>
      </li>
    
    
    
    
    
      <li class="">
        <a href="/documentation/distributions/">Supported distributions</a>
      </li>
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/releases-and-versions/">Releases & Versions</a>
      </li>
    
    
    
      <li class="">
        <a href="/documentation/buildpacks/">Buildpacks</a>
      </li>
    
    
    
      <li class="">
        <a href="/documentation/environment-variables/">Environment variables</a>
      </li>
    
    
    
      <li class="">
        <a href="/documentation/cli/">CLI</a>
      </li>
    
    
    
      <li class="">
        <a href="/documentation/webhooks/">Webhooks</a>
      </li>
    
    
    </ul>
  
    <a class="pure-menu-heading">languages</a>
    <ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/ruby/">Ruby</a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/nodejs/">NodeJS</a>
      </li>
    
    
    
    
    
    
    
      <li class="">
        <a href="/documentation/golang/">Go</a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    </ul>
  
    <a class="pure-menu-heading">tips</a>
    <ul>
    
    
    
      <li class="">
        <a href="/documentation/apt-https/">APT & HTTPS</a>
      </li>
    
    
    
    
    
      <li class="">
        <a href="/documentation/proxy/">How to expose the app to the world</a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    </ul>
  
    <a class="pure-menu-heading">Support</a>
    <ul>
      <li><a href="https://twitter.com/hellopkgr" href="_blank">Tweet at @hellopkgr</a></li>
      <li><a href="mailto:support@packager.io">support@packager.io</a></li>
    </ul>
  </div>
</div>

    </div>
    <div class="pure-u-1 l-box pure-u-md-3-4">
      <div class="header">
        <h1>Install, configure, and run your packaged application</h1>
        
      </div>
      <div class="content"> 
        

<p>If the packaging <a href="../launch-build">build process</a> successfully completed, you'll be able to see the Installation page, with instructions on how to deploy your application using <code>apt</code>, <code>yum</code> or <code>zypper</code>, depending on the distributions you've targeted.</p>

<div class="alert warning">

<p>In this chapter, we're assuming we've packaged a simple Ruby application, available at <a href="https://github.com/pkgr/example-sinatra-app">https://github.com/pkgr/example-sinatra-app</a>, with the resulting packages available at <a href="https://packager.io/gh/pkgr/example-sinatra-app">https://packager.io/gh/pkgr/example-sinatra-app</a>.</p>

</div>

<p>We'll install and configure the application on a Ubuntu 14.04 LTS server.</p>

<div class="alert tip">

<p>You can fork this example application to test our service. This is a good way to get up and running quickly, before trying to package your own application.</p>

</div>

<h2>
<a id="install-the-application" class="anchor" href="#install-the-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install the application</h2>

<p>Following the instructions given in the <a href="https://packager.io/gh/pkgr/example-sinatra-app/install">Installation page</a> of this application, here is how you would install the package on your server:</p>

<pre class="command-line">
<span class="command">wget -qO - https://deb.packager.io/key | sudo apt-key add -</span>
<span class="output"><span># </span>OK</span>

<span class="command">echo "deb https://deb.packager.io/gh/pkgr/example-sinatra-app trusty master" | sudo tee /etc/apt/sources.list.d/example-sinatra-app.list</span>
<span class="output"><span># </span>deb https://deb.packager.io/gh/pkgr/example-sinatra-app trusty master</span>

<span class="command">sudo apt-get update</span>
<span class="output"><span># </span>Ign http://archive.ubuntu.com trusty InRelease</span>
<span class="output"><span># </span>Ign http://archive.ubuntu.com trusty-updates InRelease</span>
<span class="output"><span># </span>Ign http://archive.ubuntu.com trusty-security InRelease</span>
<span class="output"><span># </span>Hit http://archive.ubuntu.com trusty Release.gpg</span>
<span class="output"><span># </span>Hit http://archive.ubuntu.com trusty-updates Release.gp</span>
<span class="output"><span># </span>Hit http://archive.ubuntu.com trusty-security Release.g</span>
<span class="output"><span># </span>Hit http://archive.ubuntu.com trusty Release</span>
<span class="output"><span># </span>Hit http://archive.ubuntu.com trusty-updates Release</span>
<span class="output"><span># </span>Hit http://archive.ubuntu.com trusty-security Release</span>
<span class="output"><span># </span>Get:1 https://deb.packager.io trusty InRelease</span>
<span class="output"><span># </span>Ign https://deb.packager.io trusty InRelease</span>

<span class="command">sudo apt-get install example-sinatra-app</span>
<span class="output"><span># </span>Reading package lists... Done</span>
<span class="output"><span># </span>Building dependency tree</span>
<span class="output"><span># </span>Reading state information... Done</span>
<span class="output"><span># </span>The following extra packages will be installed:</span>
<span class="output"><span># </span>  libpq5 libreadline5 libxml2 libxslt1.1 mysql-common sgml-base xml-core</span>
<span class="output"><span># </span>Suggested packages:</span>
<span class="output"><span># </span>  sgml-base-doc debhelper</span>
<span class="output"><span># </span>The following NEW packages will be installed:</span>
<span class="output"><span># </span>  example-sinatra-app libpq5 libreadline5 libxml2 libxslt1.1 mysql-common</span>
<span class="output"><span># </span>  sgml-base xml-core</span>
<span class="output"><span># </span>0 upgraded, 8 newly installed, 0 to remove and 6 not upgraded.</span>
<span class="output"><span># </span>Need to get 19.2 MB of archives.</span>
<span class="output"><span># </span>After this operation, 71.8 MB of additional disk space will be used.</span>
<span class="output"><span># </span>Do you want to continue? [Y/n]</span>
</pre>

<p>Let's dissect what the above instructions do:</p>

<ol>
<li><p>The first command adds our GPG key to the list of the keys that your system recognizes. This makes sure that all packages downloaded by your package manager can be verified as coming from us.</p></li>
<li><p>The second command adds an additional APT repository to your system, from where you will get packages for your application. Notice the use of HTTPS to secure the communication between your servers and ours.</p></li>
<li><p>Finally, the third and fourth commands are the usual way of installing packages on Debian based systems, by first updating the list of packages available, and then installing it.</p></li>
</ol>

<p>Once it's installed, you can verify that everything works as expected, thanks to the command line utility that ships with all packages (named after your application's name). For instance, let's check that our application has access to a Ruby runtime:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app run ruby -v</span>
<span class="output"><span># </span>ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]</span>
</pre>

<p>Then, we can check that the <code>web</code> process (declared in the application's <a href="https://github.com/pkgr/example-sinatra-app/blob/master/Procfile">Procfile</a>) can run without issues, in foreground mode:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app run web</span>
<span class="output"><span># </span>Puma 2.9.2 starting...</span>
<span class="output"><span># </span>* Min threads: 0, max threads: 16</span>
<span class="output"><span># </span>* Environment: production</span>
<span class="output"><span># </span>* Listening on tcp://0.0.0.0:6000</span>
<span class="output"><span># </span>== Sinatra/1.4.5 has taken the stage on 6000 for production with backup from Puma</span>
</pre>

<p>Or, you can start the application in the background by generating init script for your system:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app scale web=1</span>
<span class="output"><span># </span>Scaling up...</span>
<span class="output"><span># </span>example-sinatra-app-web-1 start/running, process 10443</span>
<span class="output"><span># </span>example-sinatra-app-web start/running</span>
<span class="output"><span># </span>example-sinatra-app start/running</span>
<span class="output"><span># </span>--&gt; done.</span>
</pre>

<div class="alert tip">

<p>You can generate init scripts for any of the processes declared in your <code>Procfile</code>. For instance, most of the complex apps have some kind of <code>worker</code> process to start alongside their main <code>web</code> process. In that case, you would scale both processes by doing <code>$ sudo example-sinatra-app scale web=1 worker=1</code>.</p>

</div>

<p>It's now time to check that the application is running correctly:</p>

<pre class="command-line">
<span class="command">curl http://localhost:6000/</span>
<span class="output"><span># </span>Hello, world. Here is the content of HELLO_URL (https://api.github.com/rate_limit): "{\"resources\":{\"core\":{\"limit\":60,\"remaining\":60,\"reset\":1416572299},\"search\":{\"limit\":10,\"remaining\":10,\"reset\":1416568759}},\"rate\":{\"limit\":60,\"remaining\":60,\"reset\":1416572299}}"</span>
</pre>

<p>Success!</p>

<h2>
<a id="configure-your-application" class="anchor" href="#configure-your-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure your application</h2>

<p>You can set environment variables for your application by using the <code>config:set</code> command of the command-line tool.</p>

<p>For instance, our simple application will fetch the HTML content of a URL given as the <code>HELLO_URL</code> environment variable, which we can alter by doing:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app config:set HELLO_URL=<em>https://google.com</em></span>
</pre>

<p>We can also alter the port on which the application listens (by default, <code>6000</code>):</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app config:set PORT=<em>8000</em></span>
</pre>

<p>Don't forget to restart the application after making changes to the configuration:</p>

<pre class="command-line">
<span class="command">sudo service example-sinatra-app restart</span>
<span class="output"><span># </span>example-sinatra-app stop/waiting</span>
<span class="output"><span># </span>example-sinatra-app start/running</span>
</pre>

<p>We can now access the application on port 8000, and verify that the application returns the <code>HELLO_URL</code> we've set:</p>

<pre class="command-line">
<span class="command">curl localhost:8000</span>
<span class="output"><span># </span>Hello, world. Here is the content of HELLO_URL (https://google.com): "&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\"&gt;\n&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;\n&lt;H1&gt;302 Moved&lt;/H1&gt;\nThe document has moved\n&lt;A HREF=\"https://www.google.fr/?gfe_rd=cr&amp;ei=1SFvVLDYJsXI8gfl5YBI\"&gt;here&lt;/A&gt;.\r\n&lt;/BODY&gt;&lt;/HTML&gt;\r\n"</span>
</pre>

<div class="alert tip">

<p>See the <a href="../environment-variables">list of all default environment variables</a> set for your application.</p>

</div>

<p>At any time, you can see the full list of environment variables available to your application by using the <code>config</code> command:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app config</span>
<span class="output"><span># </span>APP_GROUP=example-sinatra-app</span>
<span class="output"><span># </span>APP_HOME=/opt/example-sinatra-app</span>
<span class="output"><span># </span>APP_NAME=example-sinatra-app</span>
<span class="output"><span># </span>APP_RUNNER_CLI=initctl</span>
<span class="output"><span># </span>APP_RUNNER_TYPE=upstart</span>
<span class="output"><span># </span>APP_SAFE_NAME=example_sinatra_app</span>
<span class="output"><span># </span>APP_USER=example-sinatra-app</span>
<span class="output"><span># </span>GEM_PATH=/opt/example-sinatra-app/vendor/bundle/ruby/2.1.0:</span>
<span class="output"><span># </span>HELLO_URL=https://google.com</span>
<span class="output"><span># </span>HOME=/home/example-sinatra-app</span>
<span class="output"><span># </span>LANG=en_US.UTF-8</span>
<span class="output"><span># </span>PATH=/opt/example-sinatra-app/bin:/opt/example-sinatra-app/vendor/bundle/bin:/opt/example-sinatra-app/vendor/bundle/ruby/2.1.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/sbin</span>
<span class="output"><span># </span>PORT=8000</span>
<span class="output"><span># </span>PWD=/opt/example-sinatra-app</span>
<span class="output"><span># </span>RACK_ENV=production</span>
</pre>

<h2>
<a id="run-your-application" class="anchor" href="#run-your-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run your application</h2>

<p>As we've seen in the previous section, you can generate init scripts for you system by using the <code>scale</code> command:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app scale <em>PROCESS=NUM</em></span>
</pre>

<p>Once it is done, you have now access to the usual commands:</p>

<pre class="command-line">
<span class="command">sudo service example-sinatra-app status</span>
<span class="command">sudo service example-sinatra-app stop</span>
<span class="command">sudo service example-sinatra-app start</span>
<span class="command">sudo service example-sinatra-app restart</span>
</pre>

<p>If you have started multiple processes, you can also stop/start/restart process types separately, for instance if you just want to restart the <code>web</code> process(es):</p>

<pre class="command-line">
<span class="command">sudo service example-sinatra-app-web <em>[status|start|stop|restart]</em></span>
</pre>

<p>You can access the logs of your application with:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app logs # --tail</span>
<span class="output"><span># </span>== Sinatra has ended his set (crowd applauds)</span>
<span class="output"><span># </span>Puma 2.9.2 starting...</span>
<span class="output"><span># </span>* Min threads: 0, max threads: 16</span>
<span class="output"><span># </span>* Environment: production</span>
<span class="output"><span># </span>* Listening on tcp://0.0.0.0:8000</span>
<span class="output"><span># </span>== Sinatra/1.4.5 has taken the stage on 8000 for production with backup from Puma</span>
<span class="output"><span># </span>127.0.0.1 - - [21/Nov/2014 11:28:21] "GET / HTTP/1.1" 200 343 0.0984</span>
</pre>

<p>Those logs will be automatically rotated thanks to the <code>logrotate</code> file installed by the package.</p>

<p>Finally, you can run arbitrary scripts in the <strong>context of your application</strong> by using the <code>run</code> command. Some examples would be:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app run console</span>
<span class="command">sudo example-sinatra-app run rake</span>
<span class="command">sudo example-sinatra-app run ./scripts/your-custom-script</span>
<span class="command">sudo example-sinatra-app run ruby -e 'puts "hello"'</span>
</pre>

<p>You can even launch a shell in the context of your app by doing:</p>

<pre class="command-line">
<span class="command">sudo example-sinatra-app run bash</span>
<span class="output"><span># </span>example-sinatra-app@precise64:/opt/example-sinatra-app$ ls -al .</span>
<span class="output"><span># </span>total 60</span>
<span class="output"><span># </span>drwxr-xr-x  7 example-sinatra-app example-sinatra-app 4096 Nov 21 11:12 .</span>
<span class="output"><span># </span>drwxr-xr-x 14 vagrant             vagrant             4096 Nov 21 11:12 ..</span>
<span class="output"><span># </span>drwxr-xr-x  2 example-sinatra-app example-sinatra-app 4096 Nov 21 11:12 bin</span>
<span class="output"><span># </span>drwxr-xr-x  2 example-sinatra-app example-sinatra-app 4096 Nov 21 11:12 .bundle</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app  111 Nov 21 11:03 Gemfile</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app  494 Nov 21 11:03 Gemfile.lock</span>
<span class="output"><span># </span>lrwxrwxrwx  1 root                root                  28 Nov 21 11:12 log -&gt; /var/log/example-sinatra-app</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app   65 Nov 21 11:03 .pkgr.yml</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app   46 Nov 21 11:03 Procfile</span>
<span class="output"><span># </span>drwxr-xr-x  2 example-sinatra-app example-sinatra-app 4096 Nov 21 11:12 .profile.d</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app  439 Nov 21 11:03 README.md</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app  191 Nov 21 11:03 .release</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app    6 Nov 21 11:03 .ruby-version</span>
<span class="output"><span># </span>drwxr-xr-x  2 example-sinatra-app example-sinatra-app 4096 Nov 21 11:12 tmp</span>
<span class="output"><span># </span>drwxr-xr-x  6 example-sinatra-app example-sinatra-app 4096 Nov 21 11:12 vendor</span>
<span class="output"><span># </span>-rw-r--r--  1 example-sinatra-app example-sinatra-app  360 Nov 21 11:03 web.rb</span>
</pre>

<h2>
<a id="going-further" class="anchor" href="#going-further" aria-hidden="true"><span class="octicon octicon-link"></span></a>Going further</h2>

<p>This concludes the getting started guide. You can find out more about packaging your application using a guide dedicated to your language:</p>

<ul>
<li><a href="../ruby">Ruby</a></li>
<li><a href="../nodejs">NodeJS</a></li>
<li><a href="../golang">Go</a></li>
</ul>

<p>Happy packaging!</p>


      </div>
    </div>
  </div>
</div>

<script src="/static/js/jquery.toc.js"></script>
<script>
  $('#main .content').toc({
      showAlways: false
  });

  var headers = $(".content h2, .content h3");
  headers.on("mouseover", function(e) {
    $(this).find("a.anchor .octicon-link").show();
  }).on("mouseout", function(e) {
    $(this).find("a.anchor .octicon-link").hide();
  });
</script>


    </div>

    

  </body>

</html>
